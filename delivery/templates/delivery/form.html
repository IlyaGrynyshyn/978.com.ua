{% load i18n %}
{% load widget_tweaks %}
{% load static %}
<link rel="stylesheet" href="{% static 'delivery.css' %}">
{% block custom_css %}
    <style>
    [type="radio"]:checked,
        [type="radio"]:not(:checked) {
            position: absolute;
            left: -9999px;
        }

        [type="radio"]:checked + label,
        [type="radio"]:not(:checked) + label {
            position: relative;
            padding-left: 28px;
            cursor: pointer;
            line-height: 20px;
            display: inline-block;
            color: #666;
        }

        [type="radio"]:checked + label:before,
        [type="radio"]:not(:checked) + label:before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 20px;
            height: 20px;
            border: 1px solid #ddd;
            border-radius: 100%;
            background: #fff;
        }

        [type="radio"]:checked + label:after,
        [type="radio"]:not(:checked) + label:after {
            content: '';
            width: 12px;
            height: 12px;
            background: #e91629;
            position: absolute;
            top: 4px;
            left: 4px;
            border-radius: 100%;
            -webkit-transition: all 0.2s ease;
            transition: all 0.2s ease;
        }

        [type="radio"]:not(:checked) + label:after {
            opacity: 0;
            -webkit-transform: scale(0);
            transform: scale(0);
        }

        [type="radio"]:checked + label:after {
            opacity: 1;
            -webkit-transform: scale(1);
            transform: scale(1);
        }
        .delivery_methods{
            padding: 15px 0;
        }
        .delivery_select input{
            width: 0;
            height: 0;
        }
    </style>
{% endblock custom_css %}
<div class="input-group {% if form.delivery_method.errors %}has-error{% endif %} col-xs-12">
    {{ form.delivery_method.label_tag }}
    {{ form.delivery_method|add_class:"form-control" }}
</div>

<div class="delivery_methods" data-role="novaposhta-delivery-types">
    <div class="checkbox">
        <p class="delivery_select">
            <input type="radio" id="self_delivery" name="novaposhtatype" value="" data-role="novaposhtaselfdelivery" checked>
            <label for="self_delivery">
                {% trans "Self delivery from warehouse" %}
            </label>
        </p>
    </div>
    <div class="checkbox">
        <p class="delivery_select">
            <input type="radio" id="delivery_courier" name="novaposhtatype" value="">
            <label for="delivery_courier">
                {% trans "Delivery by courier" %}
            </label>
        </p>
    </div>
</div>

<div class="input-group {% if form.city.errors %}has-error{% endif %} col-xs-12">
    {{ form.city.label_tag }}
    {{ form.city|add_class:"form-control" }}
</div>

<div class="input-group {% if form.warehouse.errors %}has-error{% endif %} col-xs-12">
    <label for="{{ form.warehouse.auto_id }}">
        <span data-role="warehouse-label">
            {{ form.warehouse.label_tag }}
        </span>
        <span data-role="address-label">
            {% trans "Address" %}:
        </span>
    </label>

    {{ form.warehouse|add_class:"form-control" }}
</div>
<script src="{% static 'jquery.autocomplete.min.js' %}"></script>
<script src="{% static 'delivery.js' %}"></script>
<script>
    (function ($) {
        new DeliveryForm({
            $deliveryMethod: $('#{{ form.delivery_method.auto_id }}'),
            $city: $('#{{ form.city.auto_id }}'),
            $warehouse: $('#{{ form.warehouse.auto_id }}'),
            citiesUrl: '{% url 'delivery:cities' %}',
            warehousesUrl: '{% url 'delivery:warehouses' %}',
            deliveryMethods: {{ form.delivery_methods|safe }}
        });
    })(jQuery);
</script>
